<!DOCTYPE html>
<html>

<head>
    <title>Add Pending Users</title>
</head>

<body>
    <h1>Add Pending Users</h1>
    <button onclick="addUsers()">Add Pending Users</button>
    <div id="result"></div>

    <script>
        async function addUsers() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = 'Adding users...';

            try {
                // Try the force add endpoint first
                let response = await fetch('https://contractorcrm-api.onrender.com/force-add-users');

                if (!response.ok) {
                    // If that fails, try the new endpoint
                    response = await fetch('https://contractorcrm-api.onrender.com/add-all-missing-users');
                }

                if (!response.ok) {
                    // If that fails, try the specific users endpoint
                    response = await fetch('https://contractorcrm-api.onrender.com/add-specific-users');
                }

                if (!response.ok) {
                    // If that fails, try the original endpoint
                    response = await fetch('https://contractorcrm-api.onrender.com/api/users/create-pending', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Session-ID': 'k_Yw15k3SNCRRN_IdsQissXHzIXOYOeg'
                        },
                        body: JSON.stringify({
                            emails: [
                                'finkelmanyael@gmail.com',
                                'Shifra.sankewitz@gmail.com',
                                'mor@cns-law.co.il',
                                'uriel@chocoinsurance.com',
                                'shlomo@chocoinsurance.com',
                                'steven.kostyn@gmail.com'
                            ]
                        })
                    });
                }

                const data = await response.json();
                resultDiv.innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
            } catch (error) {
                resultDiv.innerHTML = `Error: ${error.message}`;
            }
        }
    </script>
</body>

</html>