# ğŸ—ºï¸ ××“×¨×™×š ×™×¦×™×¨×ª ××™× ×“×§×¡×™× ××¨×—×‘×™×™× ×‘-MongoDB Compass

## ğŸ“‹ **××˜×¨×”**
×™×¦×™×¨×ª ××™× ×“×§×¡×™× ××¨×—×‘×™×™× (2dsphere) ×œ×›×œ ×”×§×•×œ×§×©× ×™× ×‘×“××˜××‘×™×™×¡ GIS ×‘×××¦×¢×•×ª MongoDB Compass.

## ğŸš€ **×©×œ×‘ 1: ×¤×ª×™×—×ª MongoDB Compass**

1. **×¤×ª×— MongoDB Compass**
2. **×”×ª×—×‘×¨ ×œ-Atlas Cluster** ×©×œ×š
3. **× ×•×•×˜ ×œ-`GIS` database**

## ğŸ› ï¸ **×©×œ×‘ 2: ×”×¨×¦×ª ×¡×§×¨×™×¤×˜ ××•×˜×•××˜×™**

### **×¤×ª×™×—×ª MongoDB Shell**
1. **×œ×—×¥ ×¢×œ "Open MongoDB shell"** (×›×¤×ª×•×¨ ×‘×¦×“ ×™××™×Ÿ)
2. **×”×“×‘×§ ××ª ×”×¡×§×¨×™×¤×˜** ×-`scripts/mongodb-compass-indexes.js`
3. **×œ×—×¥ Enter** ×œ×”×¨×¦×ª ×”×¡×§×¨×™×¤×˜

### **×”×¡×§×¨×™×¤×˜ ×™×‘×¦×¢:**
- âœ… ×™×¦×™×¨×ª ××™× ×“×§×¡×™× ××¨×—×‘×™×™× ×¢×‘×•×¨ ×›×œ ×”×§×•×œ×§×©× ×™×
- âœ… ×‘×“×™×§×ª ××™× ×“×§×¡×™× ×§×™×™××™×
- âœ… ×™×¦×™×¨×ª ××™× ×“×§×¡×™× ××•×¨×›×‘×™× ×œ×‘×™×¦×•×¢×™× ×˜×•×‘×™× ×™×•×ª×¨
- âœ… ×‘×“×™×§×ª ×©××™×œ×ª×•×ª ××¨×—×‘×™×•×ª ×¢× ×§×•××•×¨×“×™× ×˜×•×ª ××›×–×™×‘

## ğŸ”§ **×©×œ×‘ 3: ×™×¦×™×¨×” ×™×“× ×™×ª (××œ×˜×¨× ×˜×™×‘×”)**

×× ××ª×” ××¢×“×™×£ ×œ×™×¦×•×¨ ××™× ×“×§×¡×™× ×™×“× ×™×ª:

### **×¢×‘×•×¨ `seismic-hazard-zone`:**
1. **×‘×—×¨ ××ª ×”×§×•×œ×§×©×Ÿ** `seismic-hazard-zone`
2. **×œ×—×¥ ×¢×œ "Indexes" tab**
3. **×œ×—×¥ ×¢×œ "+ Create Index"**
4. **×”×–×Ÿ ××ª ×”×©×“×”**: `features.geometry`
5. **×‘×—×¨ "2dsphere"** ×›×¡×•×’ ×”××™× ×“×§×¡
6. **×œ×—×¥ "Create Index"**

### **×¢×‘×•×¨ `cresta-zones`:**
1. **×‘×—×¨ ××ª ×”×§×•×œ×§×©×Ÿ** `cresta-zones`
2. **×—×–×•×¨ ×¢×œ ×”×ª×”×œ×™×š** ×›××• ×œ××¢×œ×”

### **×¢×‘×•×¨ `earthquake-fault-zones`:**
1. **×‘×—×¨ ××ª ×”×§×•×œ×§×©×Ÿ** `earthquake-fault-zones`
2. **×—×–×•×¨ ×¢×œ ×”×ª×”×œ×™×š** ×›××• ×œ××¢×œ×”

## ğŸ“ **×©××™×œ×ª×•×ª MongoDB ×™×“× ×™×•×ª**

×× ××ª×” ××¢×“×™×£ ×œ×”×¨×™×¥ ×©××™×œ×ª×•×ª ×™×“× ×™×•×ª:

### **××™× ×“×§×¡ ×‘×¡×™×¡×™**
```javascript
use GIS;

// ×¢×‘×•×¨ seismic-hazard-zone
db['seismic-hazard-zone'].createIndex(
  { "features.geometry": "2dsphere" },
  { name: "features_geometry_2dsphere" }
);

// ×¢×‘×•×¨ cresta-zones
db['cresta-zones'].createIndex(
  { "features.geometry": "2dsphere" },
  { name: "features_geometry_2dsphere" }
);

// ×¢×‘×•×¨ earthquake-fault-zones
db['earthquake-fault-zones'].createIndex(
  { "features.geometry": "2dsphere" },
  { name: "features_geometry_2dsphere" }
);
```

### **××™× ×“×§×¡ ××•×¨×›×‘**
```javascript
// ××™× ×“×§×¡ ××•×¨×›×‘ ×œ×©×™×¤×•×¨ ×‘×™×¦×•×¢×™×
db['seismic-hazard-zone'].createIndex(
  { 
    "type": 1,
    "features.geometry": "2dsphere" 
  },
  { name: "type_features_geometry_compound" }
);
```

## ğŸ§ª **×‘×“×™×§×ª ×”××™× ×“×§×¡×™×**

### **×‘×“×™×§×ª ××™× ×“×§×¡×™× ×§×™×™××™×**
```javascript
// ×‘×“×™×§×ª ××™× ×“×§×¡×™× ×¢×‘×•×¨ ×§×•×œ×§×©×Ÿ
db['seismic-hazard-zone'].getIndexes()
```

### **×‘×“×™×§×ª ×‘×™×¦×•×¢×™ ×©××™×œ×ª×”**
```javascript
// ×‘×“×™×§×ª ×‘×™×¦×•×¢×™× ×¢× explain
db['seismic-hazard-zone'].find({
  "features": {
    $elemMatch: {
      "geometry": {
        $geoIntersects: {
          $geometry: {
            type: "Point",
            coordinates: [35.102275, 33.04187]
          }
        }
      }
    }
  }
}).explain("executionStats")
```

## ğŸ¯ **×‘×“×™×§×ª ×©××™×œ×ª×•×ª ××¨×—×‘×™×•×ª**

### **×—×™×¤×•×© PNG25 ×¢×‘×•×¨ ××›×–×™×‘**
```javascript
// ×—×™×¤×•×© PNG25 ×¢×‘×•×¨ ×§×•××•×¨×“×™× ×˜×•×ª ××›×–×™×‘
db['seismic-hazard-zone'].findOne({
  "features": {
    $elemMatch: {
      "geometry": {
        $geoIntersects: {
          $geometry: {
            type: "Point",
            coordinates: [35.102275, 33.04187]
          }
        }
      }
    }
  }
});
```

### **×—×™×¤×•×© Cresta Zone ×¢×‘×•×¨ ××›×–×™×‘**
```javascript
// ×—×™×¤×•×© Cresta Zone ×¢×‘×•×¨ ×§×•××•×¨×“×™× ×˜×•×ª ××›×–×™×‘
db['cresta-zones'].findOne({
  "features": {
    $elemMatch: {
      "geometry": {
        $geoIntersects: {
          $geometry: {
            type: "Point",
            coordinates: [35.102275, 33.04187]
          }
        }
      }
    }
  }
});
```

## ğŸ“Š **×ª×•×¦××•×ª ×¦×¤×•×™×•×ª**

×œ××—×¨ ×™×¦×™×¨×ª ×”××™× ×“×§×¡×™×, ×”×©××™×œ×ª×•×ª ×××•×¨×•×ª ×œ×”×—×–×™×¨:

### **×¢×‘×•×¨ PNG25:**
```json
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {
        "Hazard": 0.175
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [...]
      }
    }
  ]
}
```

### **×¢×‘×•×¨ Cresta:**
```json
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {
        "CRESTA_ID1": "ISR_Z",
        "Zone_Name1": "Northern"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [...]
      }
    }
  ]
}
```

## âš¡ **×˜×™×¤×™× ×œ×‘×™×¦×•×¢×™×**

### **1. ××™× ×“×§×¡×™× ×‘×¨×§×¢**
```javascript
// ×™×¦×™×¨×ª ××™× ×“×§×¡ ×‘×¨×§×¢ (×œ× ×—×•×¡× ×¤×¢×•×œ×•×ª ××—×¨×•×ª)
{
  "features.geometry": "2dsphere"
},
{
  background: true
}
```

### **2. ××™× ×“×§×¡×™× ×—×œ×§×™×™×**
```javascript
// ××™× ×“×§×¡ ×¨×§ ×¢×‘×•×¨ ××¡××›×™× ×¢× geometry
{
  "features.geometry": "2dsphere"
},
{
  partialFilterExpression: {
    "features.geometry": { $exists: true }
  }
}
```

### **3. ××™× ×“×§×¡×™× ××•×¨×›×‘×™×**
```javascript
// ××™× ×“×§×¡ ××•×¨×›×‘ ×œ×©×™×¤×•×¨ ×‘×™×¦×•×¢×™×
{
  "type": 1,                    // ×¡×™× ×•×Ÿ ×œ×¤×™ ×¡×•×’
  "features.geometry": "2dsphere" // ×—×™×¤×•×© ××¨×—×‘×™
}
```

## ğŸ” **×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª**

### **×‘×¢×™×”: ××™× ×“×§×¡ ×œ× × ×•×¦×¨**
- **×¡×™×‘×”**: ×©×’×™××” ×‘×¤×•×¨××˜ ×”× ×ª×•× ×™×
- **×¤×ª×¨×•×Ÿ**: ×•×“× ×©×”× ×ª×•× ×™× ×‘×¤×•×¨××˜ GeoJSON ×ª×§×™×Ÿ

### **×‘×¢×™×”: ×©××™×œ×ª×” ××™×˜×™×ª**
- **×¡×™×‘×”**: ××™×Ÿ ××™× ×“×§×¡ ××¨×—×‘×™
- **×¤×ª×¨×•×Ÿ**: ×¦×•×¨ ××™× ×“×§×¡ 2dsphere

### **×‘×¢×™×”: ×©×’×™××ª ×§×•××•×¨×“×™× ×˜×•×ª**
- **×¡×™×‘×”**: ×¡×“×¨ ×§×•××•×¨×“×™× ×˜×•×ª ×œ× × ×›×•×Ÿ
- **×¤×ª×¨×•×Ÿ**: ×•×“× ×©×”×§×•××•×¨×“×™× ×˜×•×ª ×”×Ÿ [longitude, latitude]

## ğŸ‰ **×œ××—×¨ ×™×¦×™×¨×ª ×”××™× ×“×§×¡×™×**

×”××¢×¨×›×ª ×ª×¢×‘×•×“ ××”×¨ ×™×•×ª×¨ ×•×ª×—×–×™×¨ ×ª×•×¦××•×ª ××“×•×™×§×•×ª ×¢×‘×•×¨:
- âœ… ×—×™×¤×•×© PNG25 ×¢×‘×•×¨ ×§×•××•×¨×“×™× ×˜×•×ª ××›×–×™×‘
- âœ… ×—×™×¤×•×© Cresta Zone ×¢×‘×•×¨ ×§×•××•×¨×“×™× ×˜×•×ª ××›×–×™×‘
- âœ… ×›×œ ×©××™×œ×ª×” ××¨×—×‘×™×ª ××—×¨×ª
- âœ… ×‘×™×¦×•×¢×™× ××©×•×¤×¨×™× ×‘×›×œ×œ ×”××¢×¨×›×ª

## ğŸ“ **×ª××™×›×”**

×× ×™×© ×‘×¢×™×•×ª:
1. ×‘×“×•×§ ×©×”× ×ª×•× ×™× ×‘×¤×•×¨××˜ GeoJSON ×ª×§×™×Ÿ
2. ×•×“× ×©×”×§×•××•×¨×“×™× ×˜×•×ª ×‘×¡×“×¨ ×”× ×›×•×Ÿ [longitude, latitude]
3. ×‘×“×•×§ ×©×”××™× ×“×§×¡×™× × ×•×¦×¨×• ×‘×”×¦×œ×—×”
4. ×‘×“×•×§ ××ª ×”×œ×•×’×™× ×©×œ ×”×©×¨×ª
