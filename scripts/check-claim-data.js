require('dotenv').config();
const { getDb } = require('../server/lib/mongo');

async function checkClaimData() {
    try {
        console.log('üîó Connecting to database...');
        const db = await getDb();
        const projectId = '68bd7488690387dac0eb69c0';

        const claim = await db.collection('claims').findOne({ projectId });
        if (!claim) {
            console.log('‚ùå No claim found');
            return;
        }

        console.log('üìã Claim ID:', claim._id);
        console.log('üìã Attachments count:', claim.generalAttachments?.length || 0);

        claim.generalAttachments?.forEach((att, index) => {
            console.log(`\nAttachment ${index + 1}:`);
            console.log('  - ID:', att.id);
            console.log('  - isAutoGenerated:', att.isAutoGenerated);
            console.log('  - fileUrl:', att.fileUrl?.substring(0, 80) + '...');
            console.log('  - thumbnailUrl:', att.thumbnailUrl?.substring(0, 80) + '...');
        });

    } catch (e) {
        console.error('‚ùå Error:', e.message);
    } finally {
        process.exit(0);
    }
}

checkClaimData();


